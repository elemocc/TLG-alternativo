<!--mancano le breadcrumbs, il pulsante per salvare e i tooltips; va corretta la navbar-->
<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>TLG Canon</title>
	<link rel= "stylesheet" href= "css/style.css">
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300..700;1,300..700&family=Noto+Sans:ital,wght@0,100..900;1,100..900&family=Work+Sans:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
	<script src="https://kit.fontawesome.com/f54a36df8b.js" crossorigin="anonymous"></script>
</head>
<body>
	<header class="header_alternativo">
		<a href="index.html">TLG</a>
	</header>
		<div class="menu menu_alternativo">
			<a href="index.html">HOME</a>
			<a class="active">TLG CANON</a>
			<a href="#">LEXICA</a>
			<a href="how_to_use_TLG.html">HOW TO USE TLG</a>
			<a href="#">LOGIN</a>
		</div>
		<div class="breadcrumbs">
			
		</div>
	<div class="research">

		<div class="tabs">
	    	<button class="tab-button active" data-tab="tab1">Search the Canon</button>
	    	<button class="tab-button" data-tab="tab2">N-grams</button>
	    	<button class="tab-button" data-tab="tab3">Statistics</button>
	  	</div>

	  <!-- Contenuti -->
	  	<div id="tab1" class="tab-content active">
			<div id="search-container"></div>
	  		<div class="actions">
	  			<div class="add_row">
	    		<button id="addRowBtn"><i class="fa-solid fa-plus"></i></button>
	    		</div>
	    		<div class="clear_search"> 
		    		<button id="clearBtn" class="secondary-btn">Clear All</button>
		    		<button id="searchBtn">Search</button>
	    		</div>
  			</div>
	  	</div>
	  	<!-- script per funzionamento maschera di ricerca-->
	  	<script>
		    const container = document.getElementById("search-container");
		    const addBtn = document.getElementById("addRowBtn");
		    const clearBtn = document.getElementById("clearBtn");

		    // campi di ambito
		    const fields = {
		      "Author": "text",
		      "Title": "text",
		      "Century": "dropdown",
		      "Genre": "dropdown"
		    };

		    const operators = ["AND", "OR", "NOT"];

		    function createRow() {
		      const row = document.createElement("div");
		      row.className = "search-row";

		    const dd = document.createElement("select");
			

		      // dropdown per ambito
		      const fieldSelect = document.createElement("select");
		      for (let key in fields) {
		        const opt = document.createElement("option");
		        opt.value = key;
		        opt.textContent = key;
		        fieldSelect.appendChild(opt);
		      }
		      row.appendChild(fieldSelect);

		      // placeholder per input centrale
		      const middleContainer = document.createElement("div");
		      row.appendChild(middleContainer);

		      // dropdown per operatore
		      const opSelect = document.createElement("select");
		      operators.forEach(op => {
		        const opt = document.createElement("option");
		        opt.value = op;
		        opt.textContent = op;
		        opSelect.appendChild(opt);
		      });
		      row.appendChild(opSelect);

		      // pulsante elimina riga
		      const delBtn = document.createElement("button");
		      delBtn.className = "del-btn";
		      delBtn.innerHTML = `
			  <svg xmlns="http://www.w3.org/2000/svg" 
			       width="16" height="16" viewBox="0 0 24 24" 
			       fill="none" stroke="currentColor" 
			       stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
			    <line x1="18" y1="6" x2="6" y2="18"/>
			    <line x1="6" y1="6" x2="18" y2="18"/>
			  </svg>`;
		      delBtn.addEventListener("click", () => row.remove());
		      row.appendChild(delBtn);

		      const dropdownOptions = {
			  "Century": ["8th B.C.", "7th B.C.", "6th B.C.", "5th B.C.", "4th B.C."],
			  "Genre": ["Tragedy", "Comedy", "Epic", "Lyric"]
			};

		      // funzione per aggiornare campo centrale
		      function updateMiddle() {
			  middleContainer.innerHTML = "";
			  const field = fieldSelect.value;
			  if (fields[field] === "text") {
			    const input = document.createElement("input");
			    input.type = "text";
			    middleContainer.appendChild(input);
			  } else if (fields[field] === "dropdown") {
			    dropdownOptions[field].forEach(val => {
			      const opt = document.createElement("option");
			      opt.value = val;
			      opt.textContent = val;
			      dd.appendChild(opt);
			    });
			    middleContainer.appendChild(dd);
			  }
			}

		      fieldSelect.addEventListener("change", updateMiddle);
		      updateMiddle();

		      container.appendChild(row);
		    }

		    // aggiungi riga al click
		    addBtn.addEventListener("click", createRow);

		    // resetta tutto
		    clearBtn.addEventListener("click", () => {
		      container.innerHTML = "";
		    });

		    // una riga di default
		    createRow();
  	</script>

	  <div id="tab2" class="tab-content">
	    
	  </div>

	  <div id="tab3" class="tab-content">
	   
	  </div>

	  <!--script per far funzionare le tab nella pagina di ricerca-->
	  <script> 
	    const buttons = document.querySelectorAll(".tab-button");
	    const contents = document.querySelectorAll(".tab-content");

	    buttons.forEach(btn => {
	      btn.addEventListener("click", () => {
	        // rimuovo active da tutti
	        buttons.forEach(b => b.classList.remove("active"));
	        contents.forEach(c => c.classList.remove("active"));

	        // attivo il tab cliccato
	        btn.classList.add("active");
	        document.getElementById(btn.dataset.tab).classList.add("active");
	      });
	    });
	  </script>
	</div>
	<!-- qua si trovano i filtri e i sultati della ricerca-->
	<div class="page_content">
		<!--sezione laterale coi filtri-->
		<div class="filters">
			<div class="sort">
				<h4>Sort</h4>
				<div class="dropdown">
				    <button class="dropbtn">A-Z</button>
				    <div class="dropdown-content">
				      <div data-value="A-Z">A-Z</div>
				      <div data-value="Z-A">Z-A</div>
				      <div data-value="Latest-oldest">Latest-oldest</div>
				      <div data-value="Oldest-latest">Oldest-latest</div>
				    </div>
				  </div>  
			</div>
			<div class="sort">
				<h4>Results per page</h4>
				<div class="dropdown">
				<button class="dropbtn">10</button>
					<div class="dropdown-content">
					<div data-value="10">10</div>
					<div data-value="30">30</div>
					<div data-value="50">50</div>
					<div data-value="70">70</div>
					</div>
				  	</div>
			</div>
			<h3>Filter by:</h3>
			<div class="sort">
				<h4>Author</h4>
				<div class="dropdown">
				<button class="dropbtn">Select...</button>
					<div class="dropdown-content">
						<div data-value="Homerus">Homerus</div>
						<div data-value="Hesiodus">Hesiodus</div>
						<div data-value="Alcaeus">Alcaeus</div>
						<div data-value="Euripides">Euripides</div>
					</div>
				</div>	
				</div>
				<div class="sort">
					<h4>Century</h4>
					<div class="dropdown">
					    <button class="dropbtn">Select...</button>
					    <div class="dropdown-content">
					      <div data-value="8 B.C.">8 B.C.</div>
					      <div data-value="7 B.C.">7 B.C.</div>
					      <div data-value="6 B.C.">6 B.C.</div>
					      <div data-value="5 B.C.">5 B.C.</div>
					    </div>
					</div>	
				</div>
			</div>
		<!--script per far funzionare i dropdown-->
		<script>
		    document.querySelectorAll(".dropdown").forEach(dropdown => {
			  const button = dropdown.querySelector(".dropbtn");
			  const options = dropdown.querySelectorAll(".dropdown-content div");

			  // toggle apertura menu
			  button.addEventListener("click", (e) => {
			    e.stopPropagation(); // evita chiusura immediata
			    dropdown.classList.toggle("show");
			  });

			  // selezione opzione
			  options.forEach(opt => {
			    opt.addEventListener("click", () => {
			      button.textContent = opt.dataset.value;
			      dropdown.classList.remove("show");
			    });
			  });

			  // chiusura cliccando fuori
			  document.addEventListener("click", (e) => {
			    if (!dropdown.contains(e.target)) {
			      dropdown.classList.remove("show");
			    }
			  });
			});
  		</script>
  		<!--sezione coi risultati della ricerca-->
		<div class="results">
			<h2>17 results found</h2>
			<div class="items">
				<hr>
				<div class="item">
					<h3>Author 1</h3>
					<p>8 B.C.</p>
					<p>Tragedy</p>
					<p>3 works in the TLG</p>
					<button>Show more</button>
				</div>
				<hr>
				<div class="item">
					<h3>Author 2</h3>
					<p>4 B.C.</p>
					<p>Lyric</p>
					<p>2 works in the TLG</p>
					<button>Show more</button>
				</div>
				<hr>
				<div class="item">
					<h3>Author 3</h3>
					<p>6 B.C.</p>
					<p>Comedy</p>
					<p>10 works in the TLG</p>
					<button>Show more</button>
				</div>
				<hr>
				<div class="item">
					<h3>Author 4</h3>
					<p>2 A.D.</p>
					<p>Geography</p>
					<p>6 works in the TLG</p>
					<button>Show more</button>
				</div>
				<hr>
				<div class="item">
					<h3>Author 5</h3>
					<p>7 A.D.</p>
					<p>Comedy</p>
					<p>12 works in the TLG</p>
					<button>Show more</button>
				</div>
				<hr>
				<div class="item">
					<h3>Author 6</h3>
					<p>1 B.C.</p>
					<p>Tragedy</p>
					<p>1 work in the TLG</p>
					<button>Show more</button>
				</div>
				<hr>
			</div>
			<!--pagination-->
			<div class="pagination">
				<a href="#"><i class="fa-solid fa-angle-left"></i></a>
				<a href="#" class="active">1</a>
				<a href="#">2</a>
				<a href="#"><i class="fa-solid fa-angle-right"></i></a>
			</div>
		</div>
	</div>
	<!-- footer-->
		<footer>
			<div class="footer_content">
				<div class="first_column">
					<img src="images/TLG_logo.png">
					<div class="icons">
					<a href="#"><i class="fa-brands fa-facebook-f"></i></a>
					<a href="#"><i class="fa-brands fa-instagram"></i></a>
					<a href="#"><i class="fa-brands fa-x-twitter"></i></a>
					</div>
				</div>
				<div class="second_column">
				<h4>Need help?</h4>
				<a href="#">Contact Us</a>
				<a href="#">FAQ</a>
				<a href="#">Report a problem</a>
				</div>
				<div class="third_column">
					<h4>About UC Irvine</h4>
					<a href="#">UC Irvine website</a>
					<a href="#">Department of research</a>
				</div>
				<button>Subscribe</button>
			</div>
			<div class="footer_policy">
				<a href="#">Privacy</a>
				<a href="#">Terms of use</a>
				<a href="#">Accessibility</a>
				<a href="#">Credits</a>
			</div>
		</footer>
	
</body>
</html>