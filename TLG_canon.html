<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>TLG Canon</title>
	<link rel= "stylesheet" href= "css/style.css">
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300..700;1,300..700&family=Noto+Sans:ital,wght@0,100..900;1,100..900&family=Work+Sans:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
	<script src="https://kit.fontawesome.com/f54a36df8b.js" crossorigin="anonymous"></script>
</head>
<body>
	<header class="header_alternativo">
		<a href="index.html">TLG</a>
	</header>
		<div class="menu menu_alternativo">
			<a href="index.html">HOME</a>
			<a href="TLG_canon.html" class="active">TLG CANON</a>
			<a href="#">LEXICA</a>
			<a href="#">HOW TO USE TLG</a>
			<a href="#">LOGIN</a>
		</div>
	<div class="research">

		<div class="tabs">
	    	<button class="tab-button active" data-tab="tab1">Search the Canon</button>
	    	<button class="tab-button" data-tab="tab2">N-grams</button>
	    	<button class="tab-button" data-tab="tab3">Statistics</button>
	  	</div>

	  <!-- Contenuti -->
	  	<div id="tab1" class="tab-content active">
			<div id="search-container"></div>
	  		<div class="actions">
	  			<div class="add_row">
	    		<button id="addRowBtn"><i class="fa-solid fa-plus"></i></button></div>
	    		<div class="clear_search"> <!-- questa div serve in modo da mandare a capo i due bottoni clear e search-->
		    		<button id="clearBtn" class="secondary-btn">Clear All</button>
		    		<button id="searchBtn">Search</button>
	    		</div>
  			</div>
	  	</div>
	  	<!-- script per funzionamento maschera di ricerca-->
	  	<script>
		    const container = document.getElementById("search-container");
		    const addBtn = document.getElementById("addRowBtn");
		    const clearBtn = document.getElementById("clearBtn");

		    // campi di ambito
		    const fields = {
		      "Author": "text",
		      "Title": "text",
		      "Century": "dropdown",
		      "Genre": "dropdown"
		    };

		    const operators = ["AND", "OR", "NOT"];

		    function createRow() {
		      const row = document.createElement("div");
		      row.className = "search-row";

		      // dropdown per ambito
		      const fieldSelect = document.createElement("select");
		      for (let key in fields) {
		        const opt = document.createElement("option");
		        opt.value = key;
		        opt.textContent = key;
		        fieldSelect.appendChild(opt);
		      }
		      row.appendChild(fieldSelect);

		      // placeholder per input centrale
		      const middleContainer = document.createElement("div");
		      row.appendChild(middleContainer);

		      // dropdown per operatore
		      const opSelect = document.createElement("select");
		      operators.forEach(op => {
		        const opt = document.createElement("option");
		        opt.value = op;
		        opt.textContent = op;
		        opSelect.appendChild(opt);
		      });
		      row.appendChild(opSelect);

		      // pulsante elimina riga
		      const delBtn = document.createElement("button");
		      delBtn.innerHTML = `
			  <svg xmlns="http://www.w3.org/2000/svg" 
			       width="16" height="16" viewBox="0 0 24 24" 
			       fill="none" stroke="currentColor" 
			       stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
			    <line x1="18" y1="6" x2="6" y2="18"/>
			    <line x1="6" y1="6" x2="18" y2="18"/>
			  </svg>`;
		      delBtn.style.background = "#2d5e2c";
		      delBtn.addEventListener("click", () => row.remove());
		      row.appendChild(delBtn);

		      const dropdownOptions = {
			  "Century": ["8th B.C", "7th B.C.", "6th B.C.", "5th B.C.", "4th B.C."],
			  "Genre": ["Tragedy", "Comedy", "Epic", "Liric"]
			};

		      // funzione per aggiornare campo centrale
		      function updateMiddle() {
			  middleContainer.innerHTML = "";
			  const field = fieldSelect.value;

			  if (fields[field] === "text") {
			    const input = document.createElement("input");
			    input.type = "text";
			    middleContainer.appendChild(input);
			  } else if (fields[field] === "dropdown") {
			    const dd = document.createElement("select");
			    dropdownOptions[field].forEach(val => {
			      const opt = document.createElement("option");
			      opt.value = val;
			      opt.textContent = val;
			      dd.appendChild(opt);
			    });
			    middleContainer.appendChild(dd);
			  }
			}

		      fieldSelect.addEventListener("change", updateMiddle);
		      updateMiddle();

		      container.appendChild(row);
		    }

		    // aggiungi riga al click
		    addBtn.addEventListener("click", createRow);

		    // resetta tutto
		    clearBtn.addEventListener("click", () => {
		      container.innerHTML = "";
		    });

		    // una riga di default
		    createRow();
  	</script>

	  <div id="tab2" class="tab-content">
	    
	  </div>

	  <div id="tab3" class="tab-content">
	   <!-- <form class="search-form">
	      <label for="data">Data</label>
	      <input type="date" id="data">
	      <button type="submit">Cerca</button>
	    </form> -->
	  </div>

	  <!--script per far funzionare le tab nella pagina di ricerca-->
	  <script> 
	    const buttons = document.querySelectorAll(".tab-button");
	    const contents = document.querySelectorAll(".tab-content");

	    buttons.forEach(btn => {
	      btn.addEventListener("click", () => {
	        // rimuovo active da tutti
	        buttons.forEach(b => b.classList.remove("active"));
	        contents.forEach(c => c.classList.remove("active"));

	        // attivo il tab cliccato
	        btn.classList.add("active");
	        document.getElementById(btn.dataset.tab).classList.add("active");
	      });
	    });
	  </script>
	</div>
</body>
</html>